

<mat-sidenav-container autosize fullscreen class="app-sidenav-container">

  <mat-sidenav #sidenav [style.width]="sideNavWidth" class=" mat-elevation-z10"
               [opened]="!isScreenSmall"
               [mode]="!isScreenSmall ? 'side':'over'"
               (openedChange)="onSidenavToggle($event)">

    <mat-toolbar color="primary">
      <div>
        <button mat-icon-button id="projectcss" matTooltip="projects list" (click)="openProject()">
          <mat-icon>ballot</mat-icon>
        </button>
        <!--<button mat-icon-button>
      <mat-icon>developer_board</mat-icon>
    </button>
    <button mat-icon-button>
      <mat-icon>rule</mat-icon>
    </button>-->
      </div>
      <span>{{titleProject}}</span>
      <span class="flexExpand"></span>
    </mat-toolbar>
    <mat-tab-group headerPosition="below" style="justify-content: space-between; height: calc(100% - 64px);">
      <mat-tab style="height:100%">
        <ng-template mat-tab-label>
          <img src="/assets/project.png" style="height:24px" />
          Project docs
        </ng-template>
        <app-md-tree></app-md-tree>
      </mat-tab>
      <mat-tab *ngIf="currentBranch != null">
        <ng-template mat-tab-label>
          <mat-icon>smart_toy</mat-icon>
          Mark Agent
        </ng-template>
        <app-ai-chat [compactMode]="true"></app-ai-chat>
      </mat-tab>
    </mat-tab-group>

  </mat-sidenav>

  <mat-sidenav-content class="flex-container">
    <!-- Overlay for capturing mouse events during drag -->
    <div class="drag-overlay" 
         [class.active]="hooked">
    </div>
    
    <div class="resize-handle"
         [class.dragging]="hooked"
         (pointerdown)="resizeWidth()"
         (mouseup)="stopResizeWidth()"
         role="separator" 
         aria-label="Ridimensiona pannello di navigazione"
         aria-orientation="vertical"
         title="Trascina per ridimensionare">
    </div>
    
    <!-- Wrapper div per router-outlet che caricherÃ  DocumentShowComponent -->
    <div class="router-outlet-wrapper">
      <router-outlet></router-outlet>
    </div>
  </mat-sidenav-content>

</mat-sidenav-container>
